== SQLite

http://en.wikipedia.org/wiki/Sqlite[SQLite] is a lightweight relational
database management system suitable for embedding into the application program
by linking the SQLite library. Structured Query Language
(http://en.wikipedia.org/wiki/SQL[SQL]) can be used to manage the content of
the database.

=== SQL basics

You can interactively input SQL commands to the command line after starting
`sqlite3` as:

----
$ sqlite3 test.db
SQLite version 3.7.14 2012-09-03 15:42:36
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite>
----

Read references:

* http://www.sqlite.org/[SQLite (upstream)]
* http://en.wikibooks.org/wiki/SQL_Exercises[SQL Exercises (Wikibooks)]
* http://en.wikibooks.org/wiki/SQL_Dialects_Reference[SQL Dialects Reference (Wikibooks)]
* http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html[SQLite Tutorial (Mike Chirico, 2007)]
* http://zetcode.com/databases/sqlitetutorial/[SQLite tutorial (Jan Bodnar, 2009)]
* http://zetcode.com/db/sqlitepythontutorial/[SQLite Python tutorial (Jan Bodnar, 2011)]

Alternatively, the GUI tool `sqlitebrowser` may be used, too.

=== Phonebook

Let's make a batch file of SQL commands to create a phonebook database.

.SQL batch file `sql-1.sql`:
----
include::sqlite/sqlite/sql-1.sql[]
----

Here, "`NOT NULL`" is specified to avoid empty data.

Let's create a SQL database file `private.db` containing a phonebook data as
a `phone` table using `sqlite3`.  For readability, I added "`-echo`" to echo
SQL command to the console.

----
include::sqlite/sqlite/sql-1.log[]
----

Let's add, update, delete data in this `phone` table be creating a batch file
`sql-2.sql` and executing `sqlite3` with it.

----
include::sqlite/sqlite/sql-2.log[]
----

.SQL wildcard chracters used for `LIKE` matching
[grid="all",options="header"]
|====
|Wildcard|Description
|`%`|A substitute for zero or more characters
|`_`|A substitute for exactly one character
|====

=== SQL + Python

You can manupilate SQL database via Python using the pysqlite binding.  For example:

.Python code example to add "Abraham Lincoln" to the phonebook.
----
include::sqlite/sqlite/sql-3.py[]
----

Let's execute it.

----
include::sqlite/sqlite/sql-3.log[]
----

=== NULL data

SQL command behavior for NULL data is complicated.  See how SQLite behaves:

----
include::sqlite/sqlite/sql-4.log[]
----

TIP: The autogenerated "`rowid`" is a 64-bit signed integer key that uniquely
identifies the row within its table.

